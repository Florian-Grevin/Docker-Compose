<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>Test Socket.IO</title>
<!-- Import de la librairie Client Socket.IO -->
<script src="https://cdn.socket.io/4.5.4/socket.io.min.js"></script>

<style>
body { font-family: sans-serif; padding: 20px; }
.log { background: #f4f4f4; border: 1px solid #ddd; padding: 10px; height: 300px;
overflow-y: scroll; }
</style>
</head>
<body>
<h1>Console Client Socket.IO</h1>
<button onclick="sendPing()">Envoyer PING</button>
<div id="logs" class="log"></div>
<script>
// Connexion au serveur
const socket = io('http://localhost:3000');
const logDiv = document.getElementById('logs');
function addLog(message) {
const p = document.createElement('p');
p.textContent = `[${new Date().toLocaleTimeString()}] ${message}`;
logDiv.appendChild(p);
}
socket.on('connect', () => {
addLog(`Connecté au serveur avec l'ID : ${socket.id}`);
});

socket.on('my_pong', (data) => {
addLog(`Reçu du serveur : ${data.response}`);
});

socket.on('broadcast_msg', (data) => {
  addLog(`Broadcast : ${data.message}`);
});


// Fonction déclenchée par le bouton
function sendPing() {
addLog('Envoi de "ping"...');
socket.emit('my_ping', { text: 'Hello Server!' });
}
</script>
</body>
</html>